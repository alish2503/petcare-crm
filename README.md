# 🐾 PetCare

PetCare is a **web application** for managing pets, veterinary appointments, and medical records.  
It allows pet owners to register, log in, manage their pets, schedule appointments with doctors, and view the medical history of each pet.  

---

## ✨ Features

- 🔐 User registration & login (Spring Security)
- 🐶 **CRUD for pets** (add, edit, delete, view)
- 📅 Book an appointment with a doctor
- ❌ Cancel an appointment
- 📖 View medical records for each pet
- 🖥️ Simple UI built with Thymeleaf + HTML/CSS/JS
- 🗄️ Database modes:
  - **Test mode** → H2 in-memory DB with preloaded test data
  - **Dev mode** → PostgreSQL with Docker Compose

---

## 🛠️ Tech Stack

**Backend:**
- Java 17+
- Spring Boot (Web, Security, Data JPA)
- Hibernate ORM

**Frontend:**
- Thymeleaf templates
- HTML, CSS, JavaScript

**Database:**
- H2 (Test mode)
- PostgreSQL (Dev mode, via Docker Compose)

**Other:**
- Maven
- JUnit + Spring Test (integration tests)
- Docker Compose (for PostgreSQL)

---

## 🚀 Getting Started

### 1. Prerequisites
Make sure you have installed:
- JDK 17+
- Maven 3+
- Docker & Docker Compose (for dev mode)

---

### 2. Run in Test Mode (H2 database)
This mode uses an in-memory H2 database and auto-loads demo data.

```bash
mvn spring-boot:run -Dspring-boot.run.profiles=test
```

Once started, open:  
👉 http://localhost:8080

---

### 3. Run in Development Mode (PostgreSQL with Docker)

1. Start PostgreSQL via Docker Compose:
   ```bash
   docker-compose up -d
   ```
   This will start a PostgreSQL 16 container with:
   - Database: `petcare`
   - User: `petuser`
   - Password: `petpass`

2. Run the app with the `dev` profile:
   ```bash
   mvn spring-boot:run -Dspring-boot.run.profiles=dev
   ```

---

### 4. Run Tests
All tests run against H2. Integration tests for controllers run with test data auto-generated by a bean.

For unit tests only:

```bash
mvn test
```

---

To include integration tests:

```bash
mvn verify
```

---

## 📂 Project Structure

```
src/
 ├── main/
 │   ├── java/com/example/petcare   # Java source (controllers, services, entities, repositories)
 │   ├── resources/
 │   │   ├── templates/             # Thymeleaf HTML templates
 │   │   ├── static/                # CSS, JS
 │   │   ├── application.properties
 │   │   └── application-{profile}.properties
 │
 ├── test/                          # Integration & unit tests
```

---

## 🌐 Endpoints Overview

- `GET /` – dashboard or login page 
- `GET /register` – registration page  
- `POST /register` – register new user  
- `GET /login` – login page  
- `POST /login` – user authentication  
- `GET /dashboard` – dashboard page
- `GET /pets` – list pets  
- `POST /pets` – add a new pet  
- `PUT /{id}` – update pet
- `DELETE /{id}` – delete pet
- `GET /availableDoctors` – list available doctors slots 
- `GET /appointments` – list appointments  
- `POST /appointments` – book an appointment  
- `DELETE /appointments/{id}` – cancel appointment  
- `GET /medical-records/{petId}` – view pet medical records  

---

## 📖 Notes
- In **test mode**, demo data (users, pets, doctors, slots, appointments, medical records) is auto-generated.  
- In **dev mode**, the database starts empty (manual data entry required).  

---

